var l=Object.defineProperty;var f=(i,e,s)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var c=(i,e,s)=>f(i,typeof e!="symbol"?e+"":e,s);import{m as g,n as v,p}from"./index-aVLYjZOP.js";import{a as u,B as h,A as d}from"./settings-Cyt-79II.js";function E(){const i=g(p,null);return i===null&&v("use-notification","No outer `n-notification-provider` found."),i}class I{constructor(e,s,r,a,t){c(this,"id");c(this,"serviceId");c(this,"serviceName");c(this,"servicePath");c(this,"privilegeKeys");this.id=e,this.serviceId=s,this.serviceName=r,this.servicePath=a,this.privilegeKeys=t}async fetch(e){try{const r=(await u.get(`${h.url}/service/${e}`,{withCredentials:!0})).data;if(r.success){const{id:a,serviceName:t,servicePath:o,privilegeKeys:n}=r.data;this.id=a,this.serviceId=e,this.serviceName=t,this.servicePath=o,this.privilegeKeys=n}else throw new Error(r.message)}catch(s){throw s}}}u.defaults.withCredentials=!0;class m{static async register(e,s,r,a,t){var o;try{return t==="default"&&(t=void 0),(await u.post(`${this.backendUrl}/auth/register`,{username:e,email:s,password:r,emailCaptcha:a,serviceId:t})).data}catch(n){return n instanceof d?(o=n.response)==null?void 0:o.data:{success:!1,message:n.message??"Error registering user"}}}static async login(e,s,r){var a;try{return r==="default"&&(r=void 0),(await u.post(`${this.backendUrl}/auth/login`,{username:e,password:s,serviceId:r})).data}catch(t){return t instanceof d?(a=t.response)==null?void 0:a.data:{success:!1,message:t.message??"Error logging in"}}}}c(m,"backendUrl",h.url);export{I as S,m as U,E as u};
