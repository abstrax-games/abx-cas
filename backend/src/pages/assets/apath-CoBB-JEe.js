var l=Object.defineProperty;var f=(r,e,s)=>e in r?l(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var c=(r,e,s)=>f(r,typeof e!="symbol"?e+"":e,s);import{m as g,n as v,p as m}from"./index-DhWzz5qN.js";import{a as u,B as d,A as h}from"./settings-B74Ox_z4.js";function P(){const r=g(m,null);return r===null&&v("use-notification","No outer `n-notification-provider` found."),r}class E{constructor(e,s,t,a,i){c(this,"id");c(this,"serviceId");c(this,"serviceName");c(this,"servicePath");c(this,"privilegeKeys");this.id=e,this.serviceId=s,this.serviceName=t,this.servicePath=a,this.privilegeKeys=i}async fetch(e){try{const t=(await u.get(`${d.url}/service/${e}`,{withCredentials:!0})).data;if(t.success){const{id:a,serviceName:i,servicePath:o,privilegeKeys:n}=t.data;this.id=a,this.serviceId=e,this.serviceName=i,this.servicePath=o,this.privilegeKeys=n}else throw new Error(t.message)}catch(s){throw s}}}u.defaults.withCredentials=!0;class p{static async register(e,s,t,a,i){var o;try{return i==="default"&&(i=void 0),(await u.post(`${this.backendUrl}/auth/register`,{username:e,email:s,password:t,emailCaptcha:a,serviceId:i})).data}catch(n){return n instanceof h?(o=n.response)==null?void 0:o.data:{success:!1,message:n.message??"Error registering user"}}}static async login(e,s,t){var a;try{return t==="default"&&(t=void 0),(await u.post(`${this.backendUrl}/auth/login`,{username:e,password:s,serviceId:t})).data}catch(i){return i instanceof h?(a=i.response)==null?void 0:a.data:{success:!1,message:i.message??"Error logging in"}}}}c(p,"backendUrl",d.url);const I=(r,e,s)=>{const t=new URL(r);return t.searchParams.set("tgt",e),s&&t.searchParams.set("st",s),t.toString()};export{E as S,p as U,I as r,P as u};
